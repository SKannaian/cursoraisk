<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wholesale Car Inventory System</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Wholesale Car Inventory System</h1>
            <nav>
                <button id="viewInventoryBtn" class="nav-btn">View Inventory</button>
                <button id="addVehicleBtn" class="nav-btn active">Add Vehicle</button>
            </nav>
        </header>

        <!-- Add Vehicle Form -->
        <section id="addVehicleSection" class="section">
            <h2>Add New Vehicle</h2>
            <div class="form-container">
                <form id="vehicleForm" class="vehicle-form-main">
                <div class="form-group">
                    <label for="vin">VIN Number *</label>
                    <div class="vin-input-group">
                        <input type="text" id="vin" name="vin" maxlength="17" required placeholder="Enter 17-character VIN">
                        <button type="button" id="lookupVinBtn" class="btn-secondary">Lookup VIN</button>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="make">Make *</label>
                        <input type="text" id="make" name="make" required>
                    </div>
                    <div class="form-group">
                        <label for="model">Model *</label>
                        <input type="text" id="model" name="model" required>
                    </div>
                    <div class="form-group">
                        <label for="year">Year *</label>
                        <input type="number" id="year" name="year" min="1900" max="2100" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="trim">Trim</label>
                        <input type="text" id="trim" name="trim">
                    </div>
                    <div class="form-group">
                        <label for="color">Color</label>
                        <input type="text" id="color" name="color">
                    </div>
                    <div class="form-group">
                        <label for="miles">Miles *</label>
                        <input type="number" id="miles" name="miles" min="0" required>
                    </div>
                </div>

                <h3>Purchase Details</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="date_bought">Date Bought *</label>
                        <input type="date" id="date_bought" name="date_bought" required>
                    </div>
                    <div class="form-group">
                        <label for="auction_site">Auction Site *</label>
                        <select id="auction_site" name="auction_site" required>
                            <option value="">Select Auction Site</option>
                            <option value="Carmax">Carmax</option>
                            <option value="OpenLane">OpenLane</option>
                            <option value="Manheim">Manheim</option>
                            <option value="Adesa">Adesa</option>
                            <option value="CoPart">CoPart</option>
                            <option value="ACVAuction">ACVAuction</option>
                            <option value="AutoNation">AutoNation</option>
                            <option value="Avdaa">Avdaa</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="buy_price">Buy Price ($) *</label>
                        <input type="number" id="buy_price" name="buy_price" step="0.01" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="auction_fees">Auction Fees ($) *</label>
                        <input type="number" id="auction_fees" name="auction_fees" step="0.01" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="transport_fee">Transportation Fee ($) *</label>
                        <input type="number" id="transport_fee" name="transport_fee" step="0.01" min="0" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="market_price">Market Price ($) - For Comparison</label>
                    <input type="number" id="market_price" name="market_price" step="0.01" min="0" placeholder="Enter price from CarGurus or other site">
                </div>

                <div class="profit-display" id="profitDisplay" style="display: none;">
                    <h4>Cost Breakdown</h4>
                    <div class="profit-item">
                        <span>Buy Price:</span>
                        <span id="displayBuyPrice">$0.00</span>
                    </div>
                    <div class="profit-item">
                        <span>Auction Fees:</span>
                        <span id="displayAuctionFees">$0.00</span>
                    </div>
                    <div class="profit-item">
                        <span>Transport Fee:</span>
                        <span id="displayTransportFee">$0.00</span>
                    </div>
                    <div class="profit-item">
                        <span>Repair Costs:</span>
                        <span id="displayRepairCosts">$0.00</span>
                    </div>
                    <div class="profit-item total">
                        <span>Total Cost (Profit Price):</span>
                        <span id="displayProfitPrice">$0.00</span>
                    </div>
                    <div class="profit-item" id="marketPriceDisplay" style="display: none;">
                        <span>Market Price:</span>
                        <span id="displayMarketPrice">$0.00</span>
                    </div>
                    <div class="profit-item profit-margin" id="profitMarginDisplay" style="display: none;">
                        <span>Potential Profit:</span>
                        <span id="displayProfitMargin">$0.00</span>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn-primary">Save Vehicle</button>
                    <button type="button" id="resetFormBtn" class="btn-secondary">Reset Form</button>
                </div>
            </form>
            
            <!-- CarGurus Link Sidebar -->
            <div class="cargurus-sidebar">
                <h3>Price Comparison</h3>
                <div id="cargurusLinkContainer" class="cargurus-link-container">
                    <p class="cargurus-instruction">Enter vehicle details to see similar listings on CarGurus</p>
                    <div id="cargurusLink" style="display: none;">
                        <a id="cargurusLinkAnchor" href="#" target="_blank" class="cargurus-link-btn">
                            <span>View Similar Vehicles on CarGurus</span>
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8 0L9.41 1.41L3.83 7H16V9H3.83L9.41 14.59L8 16L0 8L8 0Z" fill="currentColor"/>
                            </svg>
                        </a>
                        <p class="cargurus-info">Searching for: <strong id="cargurusSearchText">-</strong></p>
                    </div>
                </div>
            </div>
            </div>
            
            <!-- Repair Log Section -->
            <div id="repairLogSection" style="display: none;">
                <h3>Repair Log</h3>
                <form id="repairForm">
                    <input type="hidden" id="currentVehicleId">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="repair_date">Repair Date *</label>
                            <input type="date" id="repair_date" name="repair_date" required>
                        </div>
                        <div class="form-group">
                            <label for="repair_cost">Cost ($) *</label>
                            <input type="number" id="repair_cost" name="repair_cost" step="0.01" min="0" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="repair_description">Description *</label>
                        <textarea id="repair_description" name="repair_description" rows="3" required placeholder="Describe the repair work done"></textarea>
                    </div>
                    <button type="submit" class="btn-primary">Add Repair</button>
                </form>

                <div id="repairsList" class="repairs-list">
                    <h4>Repair History</h4>
                    <div id="repairsContainer"></div>
                </div>
            </div>
        </section>

        <!-- Inventory List View -->
        <section id="inventorySection" class="section" style="display: none;">
            <h2>Inventory List</h2>
            
            <!-- Sort Options -->
            <div class="sort-controls">
                <label for="sortBy">Sort by:</label>
                <select id="sortBy">
                    <option value="date_bought_desc">Date Bought (Newest First)</option>
                    <option value="date_bought_asc">Date Bought (Oldest First)</option>
                    <option value="miles_desc">Mileage (High to Low)</option>
                    <option value="miles_asc">Mileage (Low to High)</option>
                    <option value="year_desc">Year (Newest First)</option>
                    <option value="year_asc">Year (Oldest First)</option>
                    <option value="buy_price_desc">Buy Price (High to Low)</option>
                    <option value="buy_price_asc">Buy Price (Low to High)</option>
                </select>
            </div>
            
            <!-- Inventory Table -->
            <div class="table-container">
                <table id="inventoryTable" class="inventory-table">
                    <thead>
                        <tr>
                            <th>Year</th>
                            <th>Make</th>
                            <th>Model</th>
                            <th>VIN</th>
                            <th>Miles</th>
                            <th>Date Bought</th>
                            <th>Auction Site</th>
                            <th>Buy Price</th>
                            <th>Auction Fees</th>
                            <th>Transport Fee</th>
                            <th>Total Cost</th>
                            <th>Market Price</th>
                            <th>Profit</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="inventoryTableBody">
                        <!-- Inventory rows will be loaded here -->
                    </tbody>
                    <tfoot>
                        <tr class="totals-row">
                            <td colspan="7"><strong>Totals:</strong></td>
                            <td id="totalBuyPrice">$0.00</td>
                            <td id="totalAuctionFees">$0.00</td>
                            <td id="totalTransportFee">$0.00</td>
                            <td id="totalCost">$0.00</td>
                            <td colspan="3"></td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </section>
    </div>

    <script src="app.js"></script>
</body>
</html>

